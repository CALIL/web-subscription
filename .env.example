# ==========================================
# web-subscription 環境変数設定例
# ==========================================
# このファイルを .env にコピーして使用してください
# cp .env.example .env

# ==========================================
# 環境識別
# ==========================================
# development（ローカル開発）/production（Cloud Run本番）
APP_ENV=development

# ==========================================
# Google Cloud設定
# ==========================================
# プロジェクトID
GOOGLE_CLOUD_PROJECT=libmuteki2

# Firestoreデータベース名
FIRESTORE_DATABASE_NAME=web-subscription

# Firestoreエミュレータ（ローカル開発時）
# コメントを解除してエミュレータを使用
# FIRESTORE_EMULATOR_HOST=localhost:8080

# ==========================================
# CalilWeb API連携 (IAM認証)
# ==========================================
CALIL_WEB_AUDIENCE=https://libmuteki2.appspot.com
CALIL_WEB_BASE_URL=https://calil.jp/infrastructure

# ==========================================
# Stripe設定
# ==========================================
# 開発環境: sk_test_xxx / pk_test_xxx
# 本番環境: sk_live_xxx / pk_live_xxx

# シークレットキー
STRIPE_SECRET_KEY=sk_test_xxx

# Webhook署名シークレット（stripe listen実行時に表示される値）
STRIPE_WEBHOOK_SECRET=whsec_xxx

# 公開可能キー
STRIPE_PUBLISHABLE_KEY=pk_test_xxx

# 価格ID（Stripeダッシュボードで作成）
STRIPE_PRICE_ID_BASIC=price_xxx        # 月額1,000円プラン
STRIPE_PRICE_ID_STANDARD=price_xxx     # 月額2,000円プラン
STRIPE_PRICE_ID_PRO=price_xxx          # 月額5,000円プラン

# ==========================================
# SendGrid設定
# ==========================================
# APIキー（SendGridダッシュボードで発行）
SENDGRID_API_KEY=SG.xxx

# 送信元メールアドレス（開発：-dev付き、本番：正式アドレス）
SENDGRID_FROM_EMAIL=noreply@calil.jp

# 送信者名
SENDGRID_FROM_NAME=カーリル

# Dynamic TemplateのID（SendGridで作成）
# 未設定の場合はプレーンテキストメールを送信
SENDGRID_TEMPLATE_ID_SUBSCRIPTION_NEW=d-xxx        # 新規購読用
SENDGRID_TEMPLATE_ID_SUBSCRIPTION_UPGRADE=d-xxx    # アップグレード用
SENDGRID_TEMPLATE_ID_SUBSCRIPTION_DOWNGRADE=d-xxx  # ダウングレード用
SENDGRID_TEMPLATE_ID_SUBSCRIPTION_CANCELED=d-xxx   # 解約用

# ==========================================
# 開発環境での設定例
# ==========================================
# 1. Firestoreエミュレータを使用する場合
#    - gcloud emulators firestore start --host-port=localhost:8080
#    - FIRESTORE_EMULATOR_HOST=localhost:8080 のコメントを解除
#
# 2. Stripeテストモードの設定
#    - stripe listen --forward-to localhost:5000/subscription/stripe-webhook
#    - 表示されるWebhook署名シークレットを STRIPE_WEBHOOK_SECRET に設定
#
# 3. SendGrid開発環境
#    - 開発用APIキーを発行（制限付き権限推奨）
#    - メール送信は自動的に開発者アドレスにリダイレクトされます

# ==========================================
# 本番環境での設定例
# ==========================================
# 1. APP_ENV=production に変更
# 2. GOOGLE_CLOUD_PROJECT を本番プロジェクトIDに変更
# 3. FIRESTORE_EMULATOR_HOST の行を削除
# 4. Stripe本番キー（sk_live_xxx/pk_live_xxx）を設定
# 5. SendGrid本番APIキーと正式な送信元アドレスを設定